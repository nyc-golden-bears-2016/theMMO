console.log("ENEMY PAGE LOADING")
var currentEnemies = [];
var Enemy = function Enemy() {
  this.name = "missing no.";
  this.item = "unknown";
  this.dropRate = 0; // a number from 0 to 1 specifying the percentage that the item will drop
  this.pos_x = 0;
  this.pos_y = 300;
  this.width = 0;
  this.height = 0;
  this.attack = 0;
  this.defense = 0;
  this.attackSpeed = 0;
  this.health = 0;
  this.maxHealth = 0;
  this.pose = "";
  this.poseFrame = 0;
  this.sprites = {stand: "",
                  attack: ""};
}

var enemyMake = function(type) {
  var enemy = new Enemy;
  if (type === "slime") {
    enemy.name = "slime";
    enemy.item = "potion";
    enemy.dropRate = 0.2;
    enemy.width = 174;
    enemy.height = 131;
    enemy.attack = 4 + Math.floor(Math.random() * 4);
    enemy.defense = 4 + Math.floor(Math.random() * 4);
    enemy.attackSpeed = 70 + Math.floor(Math.random() * 35);
    enemy.maxHealth = 30 + Math.floor(Math.random() * 30);
    enemy.sprites = {stand: slime_stand01,
                    attack: slime_attack01};
  } else if (type === "bat") {
    enemy.name = "bat";
    enemy.width = 159;
    enemy.item = "vampire fang";
    enemy.dropRate = 0.5;
    enemy.height = 129;
    enemy.attack = 10 + Math.floor(Math.random() * 10);
    enemy.defense = 4 + Math.floor(Math.random() * 4);
    enemy.attackSpeed = 125 + Math.floor(Math.random() * 62);
    enemy.maxHealth = 35 + Math.floor(Math.random() * 35);
    enemy.sprites = {stand: bat_stand01,
                    attack: bat_attack01};
  } else if (type === "player") {
    enemy.width = 70;
    enemy.height = 100;
    enemy.name = "player";
    enemy.sprites = {stand: knight_south01,
                    attack: knight_south02};
  }
  enemy.pose = "standing";
  enemy.health = enemy.maxHealth;
  return enemy;
}

Enemy.prototype.drawEnemy = function(){
  this.poseFrame++;
  if(this.pose === "dead") {
    this.height = Math.max(this.height - 20, 0);
    if(this.height > 0) {
      this.pos_y += 20;
    }
  }
  if (this.pose === "standing" || this.pose === "dead") {
    return this.sprites.stand;
  } else if (this.pose === "attacking") {
    if (this.poseFrame > 20) {
      this.setPose("standing");
      return this.drawEnemy();
    } else {
      return this.sprites.attack;
    }
  }
}

Enemy.prototype.setPose = function(pose) {
  this.pose = pose;
  this.poseFrame = 0;
}

Enemy.prototype.attackPlayer = function(player) {
  player.health -= this.attack;
}

