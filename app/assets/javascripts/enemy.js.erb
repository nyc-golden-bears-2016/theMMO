console.log("ENEMY PAGE LOADING")
var Enemy = function Enemy() {
  this.xp = 0;
  this.name = "missing no.";
  this.item = "unknown";
  this.dropRate = 0; // a number from 0 to 1 specifying the percentage that the item will drop
  this.pos_x = 0;
  this.pos_y = 300;
  this.width = 0;
  this.height = 0;
  this.attack = 0;
  this.defense = 0;
  this.attackSpeed = 0;
  this.health = 0;
  this.maxHealth = 0;
  this.pose = "";
  this.poseFrame = 0;
  this.sprites = {stand: "",
                  attack: ""};
}

var enemyMake = function(type) {
  var enemy = new Enemy;
  if (type === "slime") {
    enemy.xp = 5;
    enemy.name = "slime";
    enemy.item = "potion";
    enemy.dropRate = 0.5;
    enemy.width = 174;
    enemy.height = 131;
    enemy.attack = 25 + Math.floor(Math.random() * 25);
    enemy.defense = 1 + Math.floor(Math.random() * 2);
    enemy.attackSpeed = 150 + Math.floor(Math.random() * 25);
    enemy.maxHealth = 300 + Math.floor(Math.random() * 100);
    enemy.sprites = {stand: slime_stand01,
                    attack: slime_attack01};
  } else if (type === "bat") {
    enemy.xp = 10;
    enemy.name = "bat";
    enemy.width = 159;
    enemy.height = 129;
    enemy.item = "vampire fang";
    enemy.dropRate = 0.25;
    enemy.attack = 35 + Math.floor(Math.random() * 10);
    enemy.defense = 1 + Math.floor(Math.random() * 1);
    enemy.attackSpeed = 175 + Math.floor(Math.random() * 25);
    enemy.maxHealth = 150 + Math.floor(Math.random() * 35);
    enemy.sprites = {stand: bat_stand01,
                    attack: bat_attack01};
  } else if (type === "rat") {
    var enemy = new Enemy;
    enemy.xp = 100;
    enemy.name = "rat";
    enemy.width = 250;
    enemy.item = "subway pizza";
    enemy.dropRate = 1.0;
    enemy.height = 200;
    enemy.attack = 200 + Math.floor(Math.random() * 10);
    enemy.defense = 6 + Math.floor(Math.random() * 6);
    enemy.attackSpeed = 150 + Math.floor(Math.random() * 25);
    enemy.maxHealth = 1500 + Math.floor(Math.random() * 1000);
    enemy.sprites = {stand: rat_stand01,
                    attack: rat_attack01};
  } else if (type === "bee") {
    var enemy = new Enemy;
    enemy.xp = 250;
    enemy.name = "bee";
    enemy.width = 250;
    enemy.pos_y = 210;
    enemy.item = "honey grahams";
    enemy.dropRate = 1.0;
    enemy.height = 250;
    enemy.attack = 300 + Math.floor(Math.random() * 10);
    enemy.defense = 3 + Math.floor(Math.random() * 6);
    enemy.attackSpeed = 175 + Math.floor(Math.random() * 25);
    enemy.maxHealth = 2000 + Math.floor(Math.random() * 500);
    enemy.sprites = {stand: bee_stand01,
                    attack: bee_attack01};
  } else if (type === "lysol") {
    var enemy = new Enemy;
    enemy.xp = 200;
    enemy.name = "lysol";
    enemy.width = 250;
    enemy.pos_y = 100;
    enemy.item = "GET ONE FREE!!";
    enemy.dropRate = 1.0;
    enemy.height = 200;
    enemy.attack = 2 + Math.floor(Math.random() * 10);
    enemy.defense = 6 + Math.floor(Math.random() * 6);
    enemy.attackSpeed = 50 + Math.floor(Math.random() * 25);
    enemy.maxHealth = 200 + Math.floor(Math.random() * 50);
    enemy.sprites = {stand: lysol_stand01,
                    attack: lysol_attack01};
  } else if (type === "purpleguy") {
    var enemy = new Enemy;
    enemy.xp = 200;
    enemy.name = "purpleguy";
    enemy.width = 250;
    enemy.item = "DBC T-shirt";
    enemy.dropRate = 1.0;
    enemy.height = 200;
    enemy.attack = 2 + Math.floor(Math.random() * 10);
    enemy.defense = 6 + Math.floor(Math.random() * 6);
    enemy.attackSpeed = 50 + Math.floor(Math.random() * 25);
    enemy.maxHealth = 200 + Math.floor(Math.random() * 50);
    enemy.sprites = {stand: purpleguy_stand01,
                    attack: purpleguy_attack01};

  // BOSSES
  } else if (type === "trogdor") {
    enemy.pos_y = 150;
    enemy.xp = 5000;
    enemy.name = "trogdor";
    enemy.width = 442;
    enemy.item = "trogdor head";
    enemy.dropRate = 0.5;
    enemy.height = 448;
    enemy.attack = 700 + Math.floor(Math.random() * 100);
    enemy.defense = 25 + Math.floor(Math.random() * 4);
    enemy.attackSpeed = 175 + Math.floor(Math.random() * 75);
    enemy.maxHealth = 10000 + Math.floor(Math.random() * 500);
    enemy.sprites = {stand: trogdor_stand01,
                    attack: trogdor_attack01};
  } else if (type === "kudler") {
    enemy.pos_y = 180;
    enemy.xp = 1000;
    enemy.name = "kudler";
    enemy.width = 350;
    enemy.item = "locket of hair";
    enemy.dropRate = 0.5;
    enemy.height = 400;
    enemy.attack = 100 + Math.floor(Math.random() * 100);
    enemy.defense = 50 + Math.floor(Math.random() * 4);
    enemy.attackSpeed = 175 + Math.floor(Math.random() * 75);
    enemy.maxHealth = 2500 + Math.floor(Math.random() * 500);
    enemy.sprites = {stand: ben_stand01,
                    attack: ben_attack01};
  }
  else if (type === "player") {
    enemy.width = 70;
    enemy.height = 100;
    enemy.name = "player";
    enemy.sprites = {stand: knight_south01,
                    attack: knight_south02};
  }
  enemy.pose = "standing";
  enemy.health = enemy.maxHealth;
  return enemy;
}

Enemy.prototype.drawEnemy = function(){
  this.poseFrame++;
  if(this.pose === "dead") {
    this.height = Math.max(this.height - 20, 0);
    if(this.height > 0) {
      this.pos_y += 20;
    }
  }
  if (this.pose === "standing" || this.pose === "dead") {
    return this.sprites.stand;
  } else if (this.pose === "attacking") {
    if (this.poseFrame > 20) {
      this.setPose("standing");
      return this.drawEnemy();
    } else {
      return this.sprites.attack;
    }
  }
}

Enemy.prototype.setPose = function(pose) {
  this.pose = pose;
  this.poseFrame = 0;
}

Enemy.prototype.attackPlayer = function(player) {
  bloodMarks.push(new Blood);
  new Audio('<%= asset_path("hit-arg3.wav")%>').play();
  player.health -= Math.floor(Math.max((this.attack - (Math.random() * your_char.defense * 0.50) - your_char.defense * 0.75), 1));
}

